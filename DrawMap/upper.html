<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
    <title>2026 International Convention - San Diego</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.33/esri/themes/light/main.css" />
    <link rel="stylesheet" href="style.css"  />

    <script src="https://js.arcgis.com/4.33/"></script>
    <script>
        var layers = [];
        var labels = [];
        var buttons = [];
        var theMap;
        var theView;
        var basemaps = [];
        var watercolorLayer;
        var watercolor2Layer;
        var openCycleLayer;
        var neighborhoodLayer;
        var landscapeLayer;
        var tonerLayer
        var mapGalleryOn = false;
        var gallery;
        var originalPath;
        var theLegend;
        var legOn = false;
        var legButton;
        var mapLayer1;
        var mapLayer2;
        var upLayer1;
        var dataList;
        var menuOn = false;
        var groundLayers = [];
        var upperLayers = [];

    </script>
    <script type="module">



        const [Map, MapView, GeoJSONLayer, Basemap, WebTileLayer, VectorTileLayer, TileLayer, Legend, LabelClass, TextSymbol, Compass, UniqueValueRenderer, SimpleLineSymbol] = await $arcgis.import([
            "@arcgis/core/Map.js",
            "@arcgis/core/views/MapView.js",
            "@arcgis/core/layers/GeoJSONLayer",
            "@arcgis/core/Basemap",
            "@arcgis/core/layers/WebTileLayer",
            "@arcgis/core/layers/VectorTileLayer",
            "@arcgis/core/layers/TileLayer",
            "@arcgis/core/widgets/Legend",
            "@arcgis/core/layers/support/LabelClass",
            "@arcgis/core/geometry/Point.js",
            "@arcgis/core/symbols/TextSymbol",
            "@arcgis/core/symbols/LineSymbol",
            "@arcgis/core/widgets/Sketch.js",
            "@arcgis/core/layers/GraphicsLayer",
            "@arcgis/core/geometry/support/webMercatorUtils",
            "@arcgis/core/widgets/Compass",
            "@arcgis/core/renderers/UniqueValueRenderer",
            "@arcgis/core/symbols/SimpleLineSymbol"
        ]);



        // Area for files and creating layer files
        // Begin

        // Sample layer
        // Layer 1 - polygon

        const m1Url = "data/Rooms_1.geojson";
        
        const m1Renderer = {
            type: "simple",

            symbol: {
                type: "simple-fill",
                color: [255,0,127, 0.25] ,
                outline: {
                  color: [255,0,127, .0],
                  width: "1px"
                }                
            }
        };
        const m1Layer = new GeoJSONLayer({
            url: m1Url,
            copyright: "",
            renderer: m1Renderer,
            title: "Rooms - Ground Level",
            // popupTemplate: congTemplate,
            opacity: 0.5,
            visible: true
        });
        mapLayer1 = m1Layer;
        layers.push(m1Layer);
        groundLayers.push(m1Layer);


        const upRenderer1 = {
            type: "simple",
            symbol: {
                type: "simple-fill",
                color: [255,255,0 ,0.15] ,
                outline: {
                  color: [255,255,0, .5],
                  width: "4px"
                }                
            }
        };
        const uLayer1 = new GeoJSONLayer({
            url: "data/Indoor_Upper_Level.geojson",
            copyright: "",
            renderer: upRenderer1,
            title: "Upper Level Floor",
            opacity: 1,
            visible: false

        })
        upLayer1 = uLayer1;
        upperLayers.push(uLayer1);

        const exRenderer = {
            type: "simple",

            symbol: {
                type: "simple-fill",
                color: [255,255,255, 0.1] ,
                outline: {
                  color: [0,0,255, 1],
                  width: "4px"
                }                
            }
        };
        const exLayer1 = new GeoJSONLayer({
            url: "data/ExclusiveUse_ground_level.geojson",
            copyright: "",
            renderer: exRenderer,
            title: "Exclusive Use",
            opacity: 1,
            visible: true

        })

        groundLayers.push(exLayer1);

        // const labelClass = {
        //     labelExpressionInfo: { expression: "$feature.Name" },
        //     symbol: {
        //         type: "text",  // autocasts as new TextSymbol()
        //         color: [255, 255, 255, 128],  // white
        //         font: { family: "Arial Unicode MS", size: 12, weight: "bold" },
        //         haloColor: [128,0,0, 128],  // black
        //         haloSize: 1
        //     }
        // };
        // m1Layer.labelingInfo = [ labelClass ];

        // Sample Layer 
        // Layer 2 - point

        // const m2Template = {
        //   title: "{Name}",
        //   content: [
        //         {
        //             type: "fields",
        //             fieldInfos: [
        //             {
        //                     fieldName: "FamilyName",
        //                     label: "Family Name"
        //                 },
        //                 {
        //                     fieldName: "Address",
        //                     label: "Address"
        //                 },
        //                 {
        //                     fieldName: "Names",
        //                     label: "Persons"
        //                 },
        //                 {
        //                     fieldName: "Phone",
        //                     label: "Phone"
        //                 },
        //                 {
        //                     fieldName: "Email",
        //                     label: "Email"
        //                 }
        //             ]
        //         }
        //     ]
        // };

                const defaultM2Sym = {
          type: "simple-marker", // autocasts as new SimpleMarkerSymbol()
          color: [255,255,0,.75],
          outline: {
            // autocasts as new SimpleLineSymbol()
            // color: "#71de6e",
            color: "#ff0099",
            width: 1
          }
        };

        const m2Renderer1 = {
            type: "simple",
            symbol: {
                type: "simple-marker",
                size: 6,
                color: [255,0,0],
                outline: null
            }
        };

                const m2Renderer2 = {
            type: "simple",
            symbol: {
                type: "simple-marker",
                size: 6,
                color: [0,127,0],
                outline: null
            }
        };

                const m2Renderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: defaultM2Sym,
          visualVariables: [
            {
              type: "size",
              field: "Members",
              legendOptions: {
                title: "Persons at location"
              },
              stops: [
                {
                  value: 1,
                  size: 6,
                  label: "1"
                },
                {
                  value: 2,
                  size: 8,
                  label: "2"
                },
                {
                  value: 4,
                  size: 10,
                  label: "3-4"
                },
                {
                  value: 9,
                  size: 12,
                  label: "5+"
                }
              ]
            }
          ]
        };

        var m2Url = "data/IB_1.geojson";
        const ib1 = new GeoJSONLayer({
            url: m2Url,
            copyright: "",
            title: "Information Booths - Ground Level",
            renderer: m2Renderer1,
            opacity: 1,
            // popupTemplate: m2Template,
            visible: true
        });
        mapLayer2 = ib1;
        groundLayers.push(ib1);

        const boxLabel = new LabelClass({
            symbol: new TextSymbol({
                color: "black",
                font: {
                    size: 8,
                    family: "sans-serif",
                    weight: "bold"
                },
                haloColor: "white",
                haloSize: 1
            }),
            labelExpressionInfo: {expression: "$feature.NAME"},
            labelPlacement: "above-center"

        })

        var m2url2 = "data/Boxes_1.geojson";
        const boxes1 = new GeoJSONLayer({
            url: m2url2,
            copyright: "",
            title: "Contribution Boxes - Ground Level",
            renderer: m2Renderer2,
            opacity: 1,
            outFields: "NAME",
            labelingInfo: [boxLabel],
            visible: true
        });
        mapLayer2 = boxes1;
        groundLayers.push(boxes1);

        const overAllRender = {
            type: "simple",
            symbol: {
                type: "simple-fill",
                color: [255,0,0, 0.15] ,
                outline: {
                  color: [255,0,0, 0.25],
                  width: "4px"
                }                
            }
        };

        const overAll = new GeoJSONLayer ({
            url: "data/OverAllShape.geojson",
            title: "Convention Center Footprint",
            render : overAllRender,
            opacity: 0.2,
            visible: true
        })

        const roomWalls = new GeoJSONLayer({
            url: "data/Walls_1.geojson",
            title: "Room Walls - Ground Level",
            renderer: new UniqueValueRenderer({
                field:  "Type",
                uniqueValueInfos: [
                    {
                        value: "Solid",
                        symbol: new LineSymbol({
                            color: [255,0,127, 0.5],
                            width: 3,
                            style: "solid"
                        }),
                        label: "Permanent"
                    },
                    {
                        value: "Dot",
                        symbol: new LineSymbol({
                            color: [255,0,127, 0.5],
                            width: 3,
                            style: "dot"
                        }),
                        label: "Removable"
                    }
                ]
            })
        });

        groundLayers.push(roomWalls);


        // End layer area




        // create alternate basemaps
        const watercolorBaseLayer = new WebTileLayer({
            urlTemplate: "https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key=a1d3467e-680e-443c-8f7a-5e53392bcb8f",
            subDomains: ["a", "b", "c", "d"],
            apikey: "a1d3467e-680e-443c-8f7a-5e53392bcb8f",
            copyright:
                'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, ' +
                'under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ' +
                'Data by <a href="http://openstreetmap.org/">OpenStreetMap</a>, ' +
                'under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'
        });

            // Create a Basemap with the WebTileLayer. The thumbnailUrl will be used for
            // the image in the BasemapToggle widget.
            const watercolor = new Basemap({
            baseLayers: [watercolorBaseLayer],
            title: "Watercolor",
            id: "watercolor",
            thumbnailUrl: "../../map_images/watercolor.png"
        });
        watercolorLayer = watercolor;

        const watercolorLayer2 = new VectorTileLayer({
            portalItem: {
                id: "fdf540eef40344b79ead3c0c49be76a9"
            },
            opacity: 1
        });
        const watercolor2 = new Basemap({
            baseLayers: [watercolorLayer2],
            title: "Watercolor 2",
            id: "watercolor2",
            thumbnailUrl: "../../map_images/watercolor2.png"
        });
        watercolor2Layer = watercolor2;

        const cycleMapBaseLayer = new WebTileLayer({
            urlTemplate: "https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=b0c68cba245842aaa4cb6064900cea6a",
            subDomains: ["a", "b", "c", "d"],
            apiKey: 'b0c68cba245842aaa4cb6064900cea6a',
            copyright:
                'Map tiles by <a href="thunderforest.com/">OpenCycleMap</a>, ' 
        });

        const openCycleMap = new Basemap({
            baseLayers: [cycleMapBaseLayer],
            title: "cycleOpenMap",
            id: "cycleOpenMap"
        });
        openCycleLayer = openCycleMap;

        const neighborhoodBaseLayer = new WebTileLayer({
            urlTemplate: "https://tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=b0c68cba245842aaa4cb6064900cea6a",
            subDomains: ["a", "b", "c", "d"],
            apiKey: 'b0c68cba245842aaa4cb6064900cea6a',
            copyright:
                'Map tiles by <a href="thunderforest.com/">Thunderforest Neighbourhood Map</a>, ' 
        });

        const neighborhoodMap = new Basemap({
            baseLayers: [neighborhoodBaseLayer],
            title: "neighborhoodMap",
            id: "neighborhoodMap"
        });
        neighborhoodLayer = neighborhoodMap;

        const landscapeBaseLayer = new WebTileLayer({
            urlTemplate: "https://tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey=b0c68cba245842aaa4cb6064900cea6a",
            subDomains: ["a", "b", "c", "d"],
            apiKey: 'b0c68cba245842aaa4cb6064900cea6a',
            copyright:
                'Map tiles by <a href="thunderforest.com/">Thunderforest Landscape Map</a>, ' 
        });

        const landscapeMap = new Basemap({
            baseLayers: [landscapeBaseLayer],
            title: "landscapeMap",
            id: "landscapeMap"
        });
        landscapeLayer = landscapeMap;

        const tonerBaseLayer = new WebTileLayer({
            urlTemplate: "https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}@2x.png?api_key=a1d3467e-680e-443c-8f7a-5e53392bcb8f",
		    // urlTemplate: "https://tiles.stadiamaps.com/styles/stamen_toner.json?api_key=a1d3467e-680e-443c-8f7a-5e53392bcb8f",
            subDomains: ["a", "b", "c", "d"],
            apikey: "a1d3467e-680e-443c-8f7a-5e53392bcb8f",
            copyright:
                'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, ' +
                'under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ' +
                'Data by <a href="http://openstreetmap.org/">OpenStreetMap</a>, ' +
                'under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'
        });

            // Create a Basemap with the WebTileLayer. The thumbnailUrl will be used for
            // the image in the BasemapToggle widget.
            const tonerMap = new Basemap({
            baseLayers: [tonerBaseLayer],
            title: "Toner",
            id: "toner",
            thumbnailUrl: "images/tonerMap.png"
        });
        tonerLayer = tonerMap;

        //basemaps end



        // create MapView and Map
        const map = new Map({
            basemap: "streets-relief-vector",
            layers: [
                overAll,
                m1Layer,
                roomWalls,
                exLayer1,
                ib1,
                boxes1,
                upLayer1
                
            ]
        });
        theMap = map;

        const view = new MapView({
            container: "viewDiv",
            map: map,
            zoom: 17, // zoom level
            center: [-117.161990, 32.706438] ,// longitude, latitude
            rotation: 0 // map rotation
        });
        theView = view;




        var esriConfig = {
            apiKey: "AAPKe5fcea6dfd22406bb18190ba0b202ce8GojQ3I4PUpCZPEtliruqUxWVSBBCUeuCTlnUv8td5pAhtznoxe5gQckABM6xac_q",
        };

        // Add a graphics layer for drawing shapes on map

        // theView.when(() => {
        //     const sketch = new Sketch({
        //     layer: graphicsLayer,
        //     view: view,
        //     visibleElements: {
        //         point: false,
        //         polyline: false,
        //         rectangle: false,
        //         circle: false
        //     },
        //     selectionTools: {},
        //     // graphic will be selected as soon as it is created
        //     creationMode: "update",
        //     });

        //     theView.ui.add(sketch, "top-right");
        //     theSketch = sketch;
        //     theSketch.visible = true;
        // });


        // set up coords widget
        var coordsWidget = document.createElement("div");
        coordsWidget.id = "coordsWidget";
        coordsWidget.className = "esri-widget esri-component";
        coordsWidget.style.padding = "2px 5px";
        coordsWidget.style.margin = "0 0 -12px -12px";
        coordsWidget.style.opacity = 0.8;
        coordsWidget.style.fontSize = "12px";

        theView.ui.add(coordsWidget, "bottom-right");

        function showCoordinates(pt) {
            var coords =
                "Lat/Lon: " +
            pt.latitude.toFixed(6) +
                ", " +
            pt.longitude.toFixed(6) +
                "  |  Scale: 1:" +
            Math.round(theView.scale * 1) / 1 +
                "  |  Zoom: " +
                theView.zoom;
            coordsWidget.innerHTML = coords;
        }

        theView.on("pointer-move", function (evt) {
            showCoordinates(theView.toMap({ x: evt.x, y: evt.y }));
         });

         theLegend = new Legend ({
            view: theView,
            visible: false
         });
         theView.ui.add(theLegend, "bottom-left");

        // To change starting base map, set name/object (Esri basemmaps in quotes, defined basemaps as unquoted object) 
        // then uncomment the following line

        // theMap.on("load", changeBasemap (name));

        // Basemap change end

        
        function hideLegend() {
            legButton.style.display = "none";
            legOn = false;
            theLegend.visible = legOn;
        }

        // To hide legend and button (no layers), uncomment the following line

        // theMap.on("load", hideLegend());

        // hide legend and button end

        const compass = new Compass({
            view: theView
        })

        theView.ui.add(compass,"bottom-left")

        // set up displaying coordinates of a selected feature drawn in graphic layer
        // uncomment to have coords of a selected drawn graphic displayed
        // theView.on("click", function(event) {
        //     theView.hitTest(event).then(function(response) {
        //         const results = response.results;
        //         // Filter results to find graphics from your specific GraphicsLayer
        //         const graphicHit = results.find(function(result) {
        //             return result.graphic && result.graphic.layer === graphicsLayer;
        //         });

        //         if (graphicHit) {
        //             const selectedGraphic = graphicHit.graphic;
        //             // Now you have the selected graphic
        //             // For Polygon
        //             var coords = "Coords: ";
        //             var coordsCount = 0;
        //             const pGeometry = selectedGraphic.geometry;
        //             const polygonGeometry = webMercatorUtils.webMercatorToGeographic(pGeometry);
        //             if (polygonGeometry.type == "polygon") {
        //                 polygonGeometry.rings.forEach(function(ring, ringIndex) {
        //                     // console.log(`Ring ${ringIndex}:`);
        //                     ring.forEach(function(point, pointIndex) {
        //                         // console.log(`  Point ${pointIndex}: X=${point[0]}, Y=${point[1]}`);
        //                         if (coordsCount > 0) coords += ",";
        //                         coords += '[' + point[0] + ','+point[1]+']';
        //                         coordsCount += 1;
        //                     });
        //                     console.log(coords);
        //                 });  
        //             }  else {console.log('Geometry type is ' + polygonGeometry.type)}                
        //         }
        //     });
        // });

        // End display of selected graphic coords




    </script>
    
  </head>

  <body>

    <div id="mainBox" ><div id="viewDiv"></div></div>  

    <div id="galleryBox" class="galleryList">
        <div id="galleryTitle">Map Style</div>
        <ul id="galleryUL">
            <!-- <li id="satellite" onclick="changeBasemap('satellite', 0)" title="Satellite Map">
                <img alt="Imagery" class="esri-basemap-gallery__item-thumbnail" src="https://www.arcgis.com/sharing/rest/content/items/86de95d4e0244cba80f0fa2c9403a7b2/info/thumbnail/thumbnail1591224931210.jpeg?f=json">
            </li> -->
            <li id="hybrid" onclick="changeBasemap('hybrid', 0)" title="Satellite Map">
                <img alt="Imagery" class="esri-basemap-gallery__item-thumbnail" src="https://www.arcgis.com/sharing/rest/content/items/86de95d4e0244cba80f0fa2c9403a7b2/info/thumbnail/thumbnail1591224931210.jpeg?f=json">
            </li>
            <li id="gray-vector" onclick="changeBasemap('gray-vector', 1)" title="Light Gray Map">
                <img alt="" class="esri-basemap-gallery__item-thumbnail" src="https://www.arcgis.com/sharing/rest/content/items/de45b9cad20141ebb82fae0da8b3e2c6/info/thumbnail/lightgray_thumb_b2wm.jpg?f=json">
            </li>
            <li id="streets-relief-vector" onclick="changeBasemap('streets-relief-vector', 2)" title="Streets Map" style="border-color: red">
                <img alt="Streets" class="esri-basemap-gallery__item-thumbnail" src="https://www.arcgis.com/sharing/rest/content/items/f81bc478e12c4f1691d0d7ab6361f5a6/info/thumbnail/street_thumb_b2wm.jpg?f=json">
            </li>
            <li id="streets-night-vector" onclick="changeBasemap('streets-night-vector', 3)" title="Dark Streets Map">
                <img alt="" class="esri-basemap-gallery__item-thumbnail" src="https://www.arcgis.com/sharing/rest/content/items/1c8ddaba2ee9498cb0025554351e5475/info/thumbnail/streetnight_thumb_b2.jpg?f=json">
            </li>
            <!-- <li id="watercolor2" onclick="changeBasemap('watercolor2', 4)" title="Esri Watercolor Map">
                <img alt="" class="esri-basemap-gallery__item-thumbnail" src="images/watercolor2.png">
            </li>
            <li id="watercolor" onclick="changeBasemap('watercolor', 5)" title="Stamen Watercolor Map">
                <img alt="" class="esri-basemap-gallery__item-thumbnail" src="images/watercolor.png">
            </li> -->
            <li id="openCycleMap" onclick="changeBasemap('openCycleMap', 4)" title="OpenCycleMap">
                <img alt="OpenCycleMap" class="esri-basemap-gallery__item-thumbnail" src="images/openCycleMap.png">
            </li>
            <li id="landscape" onclick="changeBasemap('landscape', 5)" title="Thunderforest Landscape Map">
                <img alt="Landscape Map" class="esri-basemap-gallery__item-thumbnail" src="images/LandscapeMap.png">
            </li>
            <li id="osm" onclick="changeBasemap('osm', 6)" title="OpenStreetMap">
                <img alt="OpenStreetMap" class="esri-basemap-gallery__item-thumbnail" src="https://www.arcgis.com/sharing/rest/content/items/c29cfb7875fc4b97b58ba6987c460862/info/thumbnail/thumbnail1547740877120.jpeg?f=json">   
            </li>
            <li id="neighbourhood" onclick="changeBasemap('neighbourhood', 7)" title="Thunderforest Neighbourhood Map">
                <img alt="Neighbourhood Map" class="esri-basemap-gallery__item-thumbnail" src="images/Neighborhood.png">
            </li>
            <li id="topo-vector" onclick="changeBasemap('topo-vector', 8)" title="Topo Map">
                <img alt="" class="esri-basemap-gallery__item-thumbnail" src="images/usgsTopoMap.jpeg" >
            </li>
            <li id="hybrid" onclick="changeBasemap('tonerLayer', 9)" title="Toner Map">
                <img alt="Toner" class="esri-basemap-gallery__item-thumbnail" src="images/tonerMap.png">
            </li>
        </ul>
    </div>
        <div id="dataList">
            <div id="dataListTitle">Layers</div>
            <ul>
                <!-- <li title="OverallShapekToggle" >
                    <input id="spreadCheck" type="checkbox" onchange="toggleLayer1(event)" checked="checked" >Rooms - Ground Level
                </li> -->
                <!-- <li title="French Valley members" >
                    <input id="spreadCheck" type="checkbox" onchange="toggleLayer2(event)" checked="checked" >French Valley members
                </li> -->
                <li title="GroundLevelSwitch" >
                    <input type="radio" name="LevelSwitch" id="option1" onchange="toggleLevelDisplay(event)" value="Ground Level" checked="checked" >Ground Level
                </li>
                <li title="UpperLevelSwitch" >
                    <input type="radio" name="LevelSwitch" id="option2" onchange="toggleLevelDisplay(event)" value="Upper Level" >Upper Level
                </li>
            </ul>
        </div>        

    <div id="menuBar"><div id="pageTitle">2026 International Convention - San Diego</div></div> 

    <div id="legendButton" onclick="toggleLegend(event)" title="Toggle Legend"></div>
     <div id="layersButton" title="Toggle Layer List"  onclick="toggleDataList()"></div>
     <div id="basemapButton" title="Toggle Map Style"  onclick="toggleMapGallery()"></div>
     <div id="rotateButton" title="Toggle Map Rotation" onclick="toggleRotate()"></div>

    <style>
        .esri-basemap-gallery__item-thumbnail {
            height: 80px;
            width: 80px;
            object-fit: cover;
            margin: 5px;
            border: solid 2px #707070;
            border-radius: 10px;
        }
        .esri-popup__main-container {
            max-height: 500px!important;
        }
        .esri-popup__footer  {
            display: none;
        }
        .esri-ui-bottom-left .esri-component.esri-legend.esri-widget--panel  {
            width: 225px !important;
            border-radius: 10px;
            border: solid 1px #707070;
        }
        .esri-ui-corner .esri-component.esri-widget {
            border: solid 1px #707070;
        }

        .esri-ui-bottom-right .esri-component.esri-widget {
            border: none !important;
        }

        #showGallery {
            color: white; 
            background-color: black; 
            border: 1px solid black; 
            position: absolute; 
            right: 0; 
            top: 0;
            z-index: 1;
            width: 150px;
            cursor: pointer;
            font-weight: bold;
        }
        #galleryTitle {
            font-weight: bold;
            float: left;
            margin-left: 15px;
            margin-bottom: -5px;
            margin-top: -3px;
        }
        #galleryBox, .galleryList {
            color: black; 
            background-color: white; 
            position: absolute; 
            right: 10px; 
            top: 40px;
            width: 300px;
            text-align: center;
            padding-top: 5px;
            padding-bottom: 5px;
            border: solid 1px #707070;
            display: none;
            border-radius: 15px;
            overflow-y: auto;
            max-height: calc(100% - 90px);
            box-shadow: 2px 3px 2px #0000004d;
        }        
        #galleryBox ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            margin-top: 2px;
            display: inline-block;
        }
        #galleryBox ul li{
            cursor: pointer;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 13px;
            display: inline-flex;
        }
        #galleryButton {
            position: absolute;
            top: 5px;
            left: 5px;
            float: left;
            width: 16px;
            height: 16px;
            border: none;
            background-color: white;
            background-image: url(images/angle-double-down_1.png);
            background-size: 75%;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
        }
        #galleryMemu {
            position: absolute;
            right: 20px;
            top: 0px;
        }
        #legendButton, #layersButton, #basemapButton, #rotateButton {
            position: absolute;
            left: 15px;
            width: 32px;
            height: 32px;
            border: 1px solid #888888;
            background-color: white;
            background-size: 75%;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            display: block;
            box-shadow: 2px 3px 2px #0000004d;
        }

        #layersButton {
            top: 120px;
            left: 15px;
            background-image: url(images/layer_layers_icon.svg);
        }
        #legendButton {
            top: 160px;
            left: 15px;
            background-image: url(images/list.jpeg);
        }
        #basemapButton {
            top: 200px;
            left: 15px;
            background-image: url(images/layer-basemap.svg);
        }

        #rotateButton {
            top: 240px;
            left: 15px;
            background-image: url(images/rotate.png);
        }
        .esri-feature-table vaadin-grid::part(body-cell) {
            font-size: 13px;
        }
        .esri-ui-corner .esri-component.esri-widget {
            box-shadow: 2px 3px 2px #0000004d;
        }
        #menuButton {
            position: absolute;
            top: 2px;
            left: 10px;
            width: 32px;
            height: 28px;            
            border: none;
            background-color: black;
            background-image: url(images/menu_icon_white.png);
            background-size: 75%;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
        }
        #dataList {
            color: black; 
            background-color: white; 
            position: absolute; 
            left: 55px; 
            top: 40px;
            width: 250px;
            padding-bottom: 20px;
            border: solid 1px #707070;
            border-radius: 15px;
            display: none;
        }
        #dataListTitle {
            font-weight: bold;

            margin-left: 15px;
        }
        #dataList ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            margin-top: 2px;
        }
        #dataList ul li {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 13px;
            cursor: pointer;
            padding-left: 20px;
        }

    </style>
    <script>
        gallery = document.getElementById("galleryBox");
        galleryUL = document.getElementById("galleryUL");
        galleryButton = document.getElementById("galleryButton");
        legButton = document.getElementById("legendButton");
        var locRef = window.location.href;
        var lastIndex = locRef.lastIndexOf("/");
        originalPath = locRef.substring(0,lastIndex);
        dataList = document.getElementById("dataList");
        rotateButton = document.getElementById("rotateButton");


        function toggleMapGallery() {
            mapGalleryOn = !mapGalleryOn;
            if (mapGalleryOn) {
                gallery.style.display = "block";
            } else {
                gallery.style.display = "none";
            }
        }

        function changeBasemap (name, index) {
            //convert string to object if defined basemap (non-Esri)
            switch (name) {
                case "watercolor" :
                    name = watercolorLayer;
                    break;
                case "watercolor2": 
                    name = watercolor2Layer;
                    break;
                case "openCycleMap":
                    name = openCycleLayer;
                    break;
                case "landscape": 
                    name = landscapeLayer;
                    break;
                case "neighbourhood": 
                    name = neighborhoodLayer;
                    break;
                case "tonerLayer":
                    name = tonerLayer;
                    break;
            }
            theMap.basemap = name;

            //highlight selected basemap image in gallery
            var list = galleryUL.children;
            for (i=0;i<list.length;i++) {
                var image = list[i].children[0];
                if (i == index) {
                    image.style.borderColor = "#ff0099";
                    image.style.borderWidth = "2px";
                } else {
                    image.style.borderColor = "#888888";
                    image.style.borderWidth = "1px";
                }
            }

        }

        function toggleLegend(e) {
            legOn = !legOn;
            theLegend.visible = legOn;

        }

        function toggleDataList(e) {
            menuOn = !menuOn
            dataList.style.display = menuOn ? "block" : "none";
        }

        function toggleLayer1 (e) {
            var checkbox = e.target;
            mapLayer1.visible = checkbox.checked;
        }

        function toggleRotate(e) {
            var rotation = theView.rotation;
            if (rotation == 0) {
                theView.rotation = 145;
            } else (
                theView.rotation = 0
            )
        }

        function toggleLevelDisplay(e) {
            var rad = e.target;
            var val = rad.value;
            if (val=="Ground Level") {
                // alert(val);
                for(let i = 0; i < groundLayers.length; i++) {
                    groundLayers[i].visible = true;
                }
                for(let j = 0; j < upperLayers.length; j++) {
                    upperLayers[j].visible = false;
                }
            } else {
                // alert(val);
                for(let i = 0; i < groundLayers.length; i++) {
                    groundLayers[i].visible = false;
                }
                for(let j = 0; j < upperLayers.length; j++) {
                    upperLayers[j].visible = true;
                }

 
            }
        }

    //    function toggleLayer2(e) {
    //         var checkbox = e.target;
    //         mapLayer2.visible = checkbox.checked;
    //     }



    </script>


  </body>
</html>